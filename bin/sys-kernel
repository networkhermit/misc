#!/bin/bash

if [ "${OSTYPE}" != 'linux-gnu' ]; then
    echo "✗ unknown os type: ‘${OSTYPE}’" 1>&2
    exit
fi

DISTRO=$(awk --field-separator = '/^ID=/ { print $2; exit }' /etc/os-release)

uname --machine --kernel-release --kernel-version

case "${DISTRO}" in
    arch)
        pacman --query 'linux'
        ;;
    fedora)
        rpm --query 'kernel'
        ;;
    kali | ubuntu)
        dpkg --get-selections 'linux-image-[0-9]*' | tac
        ;;
    *)
        echo "✗ unknown distro: ‘${DISTRO}’" 1>&2
        exit
        ;;
esac
